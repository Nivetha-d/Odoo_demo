<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_stock_picking_line_form_inherit" model="ir.ui.view">
            <field name="name">stock.picking.form.inherit</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='operations']//tree//field[@name='lot_ids']" position="after">
                    <!--                     <button type="object" class="btn-info" name="action_open_quality_check_wizard" icon="fa-check"  title="Quality Check"/>-->
                    <!--                     <field name="picking_id" invisible="0"/>-->
                    <!--                   <button string="Quality Checks" name="check_quality" type="object" class="oe_highlight"-->
                    <!--                            invisible="state in ('done', 'cancel')" clickable="state not in ('done', 'cancel')"-->
                    <!--                            data-hotkey="shift+z" groups="quality.group_quality_user"/>-->
                    <field name="quality_check_todo" column_invisible="True"/>

                    <button string="Quality Checks" name="check_quality" type="object" class="oe_highlight"
                            invisible="not quality_check_todo or state in ('done', 'cancel')"
                            groups="quality.group_quality_user"
                            data-hotkey="shift+z"/>

                </xpath>
            </field>
        </record>
        <data>
        <record id="quality_check_validate_button" model="ir.ui.view">
            <field name="name">quality.check.inherit</field>
            <field name="model">quality.check</field>
            <field name="inherit_id" ref="quality_control.quality_check_view_form"/>
            <field name="arch" type="xml">
<!--                <xpath expr="//page[@name='operations']//tree//field[@name='lot_ids']" position="after">-->
                <xpath expr="//header/button[@name='do_pass']" position="after">

                    <button string="Validate" name="button_validate" type="object" class="oe_highlight"

                            />

                </xpath>
            </field>
        </record>


<!--        code to make check quality button invisible in stock.picking form view-->
<!--        <record id="view_stock_picking_form_inherit" model="ir.ui.view">-->
<!--            <field name="name">stock.picking.form.inherit</field>-->
<!--            <field name="model">stock.picking</field>-->
<!--            <field name="inherit_id" ref="stock.view_picking_form"/>-->
<!--            <field name="arch" type="xml">-->
<!--                <xpath expr="//button[@name='check_quality']" position="attributes">-->
<!--                    <attribute name="invisible">1</attribute>-->
<!--                </xpath>-->
<!--            </field>-->
<!--        </record>-->


    </data>
    </data>

    <!--    <record id="action_open_wizard" model="ir.actions.act_window">-->
    <!--    <field name="name">Open My Wizard</field>-->
    <!--    <field name="res_model">quality.control</field>-->
    <!--    <field name="view_mode">form</field>-->
    <!--    <field name="view_type">form</field>-->
    <!--    <field name="target">new</field>-->
    <!--</record>-->


</odoo>
